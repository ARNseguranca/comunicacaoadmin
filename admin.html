<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Nascentes - Comunica√ß√£o | Painel Administrativo</title>
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&family=Inter:wght@400;500;600&display=swap" rel="stylesheet">
    <style>
        :root {
            --primary: #007bff;
            --secondary: #6c757d;
            --success: #28a745;
            --danger: #dc3545;
            --warning: #ffc107;
            --info: #17a2b8;
            --light: #f8f9fa;
            --dark: #343a40;
            --white: #ffffff;
            --text: #212529;
            --border: #dee2e6;
            --shadow: 0 4px 20px rgba(0, 0, 0, 0.1);
            --shadow-sm: 0 2px 8px rgba(0, 0, 0, 0.05);
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        html, body {
            width: 100%;
            height: 100%;
            font-family: 'Inter', sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: var(--text);
            line-height: 1.6;
        }

        .wrapper {
            display: flex;
            width: 100%;
            height: 100%;
        }

        /* SIDEBAR */
        .sidebar {
            width: 280px;
            background: var(--white);
            box-shadow: var(--shadow);
            overflow-y: auto;
            position: fixed;
            height: 100%;
            left: 0;
            top: 0;
            z-index: 1000;
        }

        .sidebar-header {
            padding: 25px 20px;
            border-bottom: 2px solid var(--light);
            background: linear-gradient(135deg, #007bff 0%, #0056b3 100%);
            color: var(--white);
        }

        .sidebar-header h1 {
            font-size: 1.3em;
            font-weight: 700;
            margin-bottom: 5px;
        }

        .sidebar-header p {
            font-size: 0.85em;
            opacity: 0.9;
        }

        .sidebar-nav {
            padding: 20px 0;
        }

        .nav-item {
            padding: 12px 20px;
            cursor: pointer;
            transition: all 0.3s ease;
            border-left: 4px solid transparent;
            color: var(--text);
            font-weight: 500;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .nav-item:hover {
            background-color: var(--light);
            border-left-color: var(--primary);
        }

        .nav-item.active {
            background-color: rgba(0, 123, 255, 0.1);
            border-left-color: var(--primary);
            color: var(--primary);
        }

        .nav-icon {
            font-size: 1.2em;
        }

        /* MAIN CONTENT */
        .main-content {
            margin-left: 280px;
            flex: 1;
            overflow-y: auto;
            padding: 30px;
        }

        .header {
            background: var(--white);
            padding: 25px 30px;
            border-radius: 12px;
            box-shadow: var(--shadow-sm);
            margin-bottom: 30px;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .header h1 {
            font-size: 2em;
            color: var(--primary);
            font-weight: 700;
        }

        .header-info {
            display: flex;
            gap: 20px;
            align-items: center;
        }

        .info-badge {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: var(--white);
            padding: 10px 20px;
            border-radius: 25px;
            font-size: 0.9em;
            font-weight: 600;
        }

        /* TABS */
        .tabs {
            display: flex;
            gap: 10px;
            margin-bottom: 30px;
            background: var(--white);
            padding: 15px;
            border-radius: 12px;
            box-shadow: var(--shadow-sm);
            flex-wrap: wrap;
        }

        .tab-btn {
            padding: 10px 20px;
            border: 2px solid var(--border);
            background: var(--white);
            color: var(--text);
            border-radius: 8px;
            cursor: pointer;
            font-weight: 600;
            transition: all 0.3s ease;
            font-size: 0.95em;
        }

        .tab-btn:hover {
            border-color: var(--primary);
            color: var(--primary);
        }

        .tab-btn.active {
            background: linear-gradient(135deg, #007bff 0%, #0056b3 100%);
            color: var(--white);
            border-color: var(--primary);
        }

        /* CONTENT SECTIONS */
        .tab-content {
            display: none;
        }

        .tab-content.active {
            display: block;
            animation: fadeIn 0.3s ease;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }

        /* CARDS */
        .card {
            background: var(--white);
            border-radius: 12px;
            padding: 25px;
            box-shadow: var(--shadow-sm);
            margin-bottom: 20px;
            border: 1px solid var(--border);
        }

        .card h2 {
            color: var(--primary);
            font-size: 1.4em;
            margin-bottom: 20px;
            padding-bottom: 15px;
            border-bottom: 2px solid var(--light);
        }

        /* FORMS */
        .form-group {
            margin-bottom: 20px;
        }

        label {
            display: block;
            margin-bottom: 8px;
            font-weight: 600;
            color: var(--text);
            font-size: 0.95em;
        }

        input[type="text"],
        input[type="date"],
        input[type="time"],
        input[type="number"],
        input[type="file"],
        select,
        textarea {
            width: 100%;
            padding: 12px 15px;
            border: 2px solid var(--border);
            border-radius: 8px;
            font-size: 0.95em;
            font-family: 'Inter', sans-serif;
            transition: all 0.3s ease;
            background: var(--light);
        }

        input[type="text"]:focus,
        input[type="date"]:focus,
        input[type="time"]:focus,
        input[type="number"]:focus,
        input[type="file"]:focus,
        select:focus,
        textarea:focus {
            outline: none;
            border-color: var(--primary);
            background: var(--white);
            box-shadow: 0 0 0 3px rgba(0, 123, 255, 0.1);
        }

        textarea {
            resize: vertical;
            min-height: 100px;
        }

        /* BUTTONS */
        button {
            padding: 12px 24px;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            font-weight: 600;
            transition: all 0.3s ease;
            font-size: 0.95em;
            display: inline-flex;
            align-items: center;
            gap: 8px;
        }

        .btn-primary {
            background: linear-gradient(135deg, #007bff 0%, #0056b3 100%);
            color: var(--white);
        }

        .btn-primary:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(0, 123, 255, 0.3);
        }

        .btn-success {
            background: linear-gradient(135deg, #28a745 0%, #1e7e34 100%);
            color: var(--white);
        }

        .btn-success:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(40, 167, 69, 0.3);
        }

        .btn-danger {
            background: linear-gradient(135deg, #dc3545 0%, #bd2130 100%);
            color: var(--white);
        }

        .btn-danger:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(220, 53, 69, 0.3);
        }

        .btn-warning {
            background: linear-gradient(135deg, #ffc107 0%, #e0a800 100%);
            color: var(--text);
        }

        .btn-warning:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(255, 193, 7, 0.3);
        }

        .btn-info {
            background: linear-gradient(135deg, #17a2b8 0%, #117a8b 100%);
            color: var(--white);
        }

        .btn-info:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(23, 162, 184, 0.3);
        }

        .btn-secondary {
            background: var(--secondary);
            color: var(--white);
        }

        .btn-secondary:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(108, 117, 125, 0.3);
        }

        .btn-group {
            display: flex;
            gap: 10px;
            margin-top: 20px;
            flex-wrap: wrap;
        }

        /* FIELDSET */
        fieldset {
            border: 2px solid var(--border);
            border-radius: 8px;
            padding: 15px;
            margin-bottom: 20px;
        }

        fieldset legend {
            font-weight: 600;
            color: var(--primary);
            padding: 0 10px;
        }

        .checkbox-group {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(100px, 1fr));
            gap: 15px;
            margin-top: 10px;
        }

        .checkbox-group label {
            display: flex;
            align-items: center;
            gap: 8px;
            margin-bottom: 0;
            font-weight: 500;
        }

        .checkbox-group input[type="checkbox"] {
            width: auto;
            cursor: pointer;
        }

        /* STATUS MESSAGES */
        .status-message {
            padding: 15px 20px;
            border-radius: 8px;
            margin-top: 15px;
            font-weight: 600;
            display: none;
            animation: slideIn 0.3s ease;
        }

        @keyframes slideIn {
            from { opacity: 0; transform: translateX(-20px); }
            to { opacity: 1; transform: translateX(0); }
        }

        .status-message.success {
            background: linear-gradient(135deg, #d4edda 0%, #c3e6cb 100%);
            color: #155724;
            border: 2px solid #c3e6cb;
        }

        .status-message.error {
            background: linear-gradient(135deg, #f8d7da 0%, #f5c6cb 100%);
            color: #721c24;
            border: 2px solid #f5c6cb;
        }

        .status-message.info {
            background: linear-gradient(135deg, #d1ecf1 0%, #bee5eb 100%);
            color: #0c5460;
            border: 2px solid #bee5eb;
        }

        /* LISTS */
        .list-item {
            background: linear-gradient(135deg, #f8f9fa 0%, #e9ecef 100%);
            border: 2px solid var(--border);
            border-radius: 8px;
            padding: 20px;
            margin-bottom: 15px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            transition: all 0.3s ease;
        }

        .list-item:hover {
            box-shadow: var(--shadow-sm);
            transform: translateY(-2px);
        }

        .list-item-content h3 {
            color: var(--primary);
            font-size: 1.1em;
            margin-bottom: 8px;
        }

        .list-item-content p {
            color: var(--secondary);
            font-size: 0.9em;
            margin: 5px 0;
        }

        .list-item-actions {
            display: flex;
            gap: 8px;
            flex-wrap: wrap;
        }

        /* DASHBOARD GRID */
        .dashboard-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 20px;
            margin-bottom: 30px;
        }

        .dashboard-card {
            background: linear-gradient(135deg, var(--white) 0%, var(--light) 100%);
            border-radius: 12px;
            padding: 25px;
            box-shadow: var(--shadow-sm);
            border: 2px solid var(--border);
            text-align: center;
            transition: all 0.3s ease;
        }

        .dashboard-card:hover {
            transform: translateY(-5px);
            box-shadow: var(--shadow);
        }

        .dashboard-card h3 {
            color: var(--secondary);
            font-size: 0.95em;
            margin-bottom: 15px;
            text-transform: uppercase;
            letter-spacing: 1px;
        }

        .dashboard-card .value {
            font-size: 2.5em;
            font-weight: 700;
            background: linear-gradient(135deg, #007bff 0%, #0056b3 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }

        /* TEXT EDITOR */
        .text-editor {
            background: var(--white);
            border-radius: 12px;
            padding: 20px;
            margin-bottom: 20px;
            border: 2px solid var(--border);
        }

        .editor-toolbar {
            display: flex;
            gap: 8px;
            margin-bottom: 15px;
            flex-wrap: wrap;
            padding-bottom: 15px;
            border-bottom: 2px solid var(--light);
        }

        .editor-toolbar button {
            padding: 8px 12px;
            font-size: 0.85em;
            background: var(--light);
            color: var(--text);
            border: 2px solid var(--border);
        }

        .editor-toolbar button:hover {
            background: var(--primary);
            color: var(--white);
            border-color: var(--primary);
        }

        .editor-toolbar button.active {
            background: var(--primary);
            color: var(--white);
            border-color: var(--primary);
        }

        .editor-content {
            min-height: 200px;
            padding: 15px;
            border: 2px solid var(--border);
            border-radius: 8px;
            background: var(--light);
            font-size: 1em;
            line-height: 1.6;
            outline: none;
        }

        .editor-content:focus {
            border-color: var(--primary);
            background: var(--white);
        }

        .color-picker-group {
            display: flex;
            gap: 10px;
            align-items: center;
            flex-wrap: wrap;
        }

        .color-input {
            width: 50px;
            height: 40px;
            border: 2px solid var(--border);
            border-radius: 8px;
            cursor: pointer;
        }

        /* PREVIEW */
        .preview-box {
            background: var(--light);
            border-radius: 12px;
            padding: 20px;
            margin-top: 20px;
            border: 2px dashed var(--border);
            min-height: 150px;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .preview-content {
            width: 100%;
            padding: 20px;
            border-radius: 8px;
            text-align: center;
            font-size: 1.1em;
            font-weight: 600;
        }

        /* MODAL */
        .modal {
            display: none;
            position: fixed;
            z-index: 2000;
            left: 0;
            top: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.6);
            justify-content: center;
            align-items: center;
        }

        .modal.active {
            display: flex;
        }

        .modal-content {
            background: var(--white);
            padding: 30px;
            border-radius: 12px;
            width: 90%;
            max-width: 600px;
            box-shadow: 0 10px 40px rgba(0, 0, 0, 0.3);
            animation: slideUp 0.3s ease;
        }

        @keyframes slideUp {
            from { opacity: 0; transform: translateY(30px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .modal-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
            padding-bottom: 15px;
            border-bottom: 2px solid var(--light);
        }

        .modal-header h2 {
            color: var(--primary);
            font-size: 1.3em;
            margin: 0;
        }

        .close-btn {
            background: none;
            border: none;
            font-size: 2em;
            cursor: pointer;
            color: var(--secondary);
            padding: 0;
            width: 40px;
            height: 40px;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .close-btn:hover {
            color: var(--danger);
        }

        /* MEDIA PREVIEW */
        .media-preview {
            max-width: 100%;
            max-height: 400px;
            border-radius: 8px;
            margin: 15px 0;
        }

        /* RESPONSIVE */
        @media (max-width: 768px) {
            .sidebar {
                width: 100%;
                height: auto;
                position: relative;
            }

            .main-content {
                margin-left: 0;
                padding: 15px;
            }

            .header {
                flex-direction: column;
                text-align: center;
                gap: 15px;
            }

            .header h1 {
                font-size: 1.5em;
            }

            .tabs {
                flex-direction: column;
            }

            .tab-btn {
                width: 100%;
            }

            .list-item {
                flex-direction: column;
                align-items: flex-start;
            }

            .list-item-actions {
                width: 100%;
                margin-top: 15px;
            }

            .dashboard-grid {
                grid-template-columns: 1fr;
            }

            .modal-content {
                width: 95%;
            }

            .checkbox-group {
                grid-template-columns: 1fr;
            }
        }
    </style>
</head>
<body>
    <div class="wrapper">
        <!-- SIDEBAR -->
        <div class="sidebar">
            <div class="sidebar-header">
                <h1>üé¨ Nascentes</h1>
                <p>Painel Administrativo</p>
            </div>
            <div class="sidebar-nav">
                <div class="nav-item active" data-tab="dashboard">
                    <span class="nav-icon">üìä</span>
                    <span>Dashboard</span>
                </div>
                <div class="nav-item" data-tab="upload">
                    <span class="nav-icon">üì§</span>
                    <span>Upload de M√≠dia</span>
                </div>
                <div class="nav-item" data-tab="text-editor">
                    <span class="nav-icon">‚úèÔ∏è</span>
                    <span>Editor de Texto</span>
                </div>
                <div class="nav-item" data-tab="manage">
                    <span class="nav-icon">üìÅ</span>
                    <span>Gerenciar M√≠dias</span>
                </div>
                <div class="nav-item" data-tab="schedule">
                    <span class="nav-icon">üìÖ</span>
                    <span>Agendar M√≠dia</span>
                </div>
                <div class="nav-item" data-tab="schedules">
                    <span class="nav-icon">üìã</span>
                    <span>Agendamentos</span>
                </div>
                <div class="nav-item" data-tab="tvs">
                    <span class="nav-icon">üì∫</span>
                    <span>TVs Online</span>
                </div>
            </div>
        </div>

        <!-- MAIN CONTENT -->
        <div class="main-content">
            <!-- HEADER -->
            <div class="header">
                <div>
                    <h1>Painel de Controle</h1>
                </div>
                <div class="header-info">
                    <div class="info-badge">üü¢ Sistema Online</div>
                </div>
            </div>

            <!-- DASHBOARD TAB -->
            <div id="dashboard" class="tab-content active">
                <div class="dashboard-grid">
                    <div class="dashboard-card">
                        <h3>Total de M√≠dias</h3>
                        <p class="value" id="total-media">0</p>
                    </div>
                    <div class="dashboard-card">
                        <h3>Agendamentos Ativos</h3>
                        <p class="value" id="total-schedules">0</p>
                    </div>
                    <div class="dashboard-card">
                        <h3>TVs Online</h3>
                        <p class="value" id="total-tvs">0</p>
                    </div>
                    <div class="dashboard-card">
                        <h3>Em Reprodu√ß√£o</h3>
                        <p class="value" id="playing">0</p>
                    </div>
                </div>
            </div>

            <!-- UPLOAD TAB -->
            <div id="upload" class="tab-content">
                <div class="card">
                    <h2>üì§ Upload de M√≠dia</h2>
                    <form id="upload-form">
                        <div class="form-group">
                            <label for="media-file">Selecione o arquivo (v√≠deo ou imagem):</label>
                            <input type="file" id="media-file" accept="video/*,image/*" required>
                        </div>
                        <div class="form-group">
                            <label for="media-name">Nome da M√≠dia:</label>
                            <input type="text" id="media-name" placeholder="Ex: Campanha de Natal" required>
                        </div>
                        <div class="form-group">
                            <label for="media-duration">Dura√ß√£o (segundos, apenas para imagens):</label>
                            <input type="number" id="media-duration" value="10" min="1" max="300">
                        </div>
                        <button type="submit" class="btn-primary">‚úÖ Fazer Upload</button>
                        <p id="upload-status" class="status-message"></p>
                    </form>
                </div>
            </div>

            <!-- TEXT EDITOR TAB -->
            <div id="text-editor" class="tab-content">
                <div class="card">
                    <h2>‚úèÔ∏è Editor de Texto Personalizado</h2>
                    <div class="form-group">
                        <label for="text-name">Nome do Texto:</label>
                        <input type="text" id="text-name" placeholder="Ex: Promo√ß√£o de Ver√£o" required>
                    </div>
                    <div class="form-group">
                        <label for="text-duration">Dura√ß√£o de Exibi√ß√£o (segundos):</label>
                        <input type="number" id="text-duration" value="10" min="1" max="300">
                    </div>
                    <div class="text-editor">
                        <div class="editor-toolbar">
                            <button type="button" id="bold-btn" title="Negrito"><strong>B</strong></button>
                            <button type="button" id="italic-btn" title="It√°lico"><em>I</em></button>
                            <button type="button" id="underline-btn" title="Sublinhado"><u>U</u></button>
                            <button type="button" id="left-align-btn" title="Alinhar √† esquerda">‚¨ÖÔ∏è</button>
                            <button type="button" id="center-align-btn" title="Centralizar">‚¨áÔ∏è</button>
                            <button type="button" id="right-align-btn" title="Alinhar √† direita">‚û°Ô∏è</button>
                            <label style="display: flex; align-items: center; gap: 8px; margin: 0;">
                                Cor do Texto:
                                <input type="color" id="text-color" value="#000000" class="color-input">
                            </label>
                            <label style="display: flex; align-items: center; gap: 8px; margin: 0;">
                                Cor de Fundo:
                                <input type="color" id="bg-color" value="#ffffff" class="color-input">
                            </label>
                            <select id="font-size" style="width: auto; padding: 8px 12px; border: 2px solid var(--border); border-radius: 8px;">
                                <option value="12px">12px</option>
                                <option value="16px">16px</option>
                                <option value="20px" selected>20px</option>
                                <option value="24px">24px</option>
                                <option value="32px">32px</option>
                                <option value="40px">40px</option>
                            </select>
                        </div>
                        <div id="editor-content" class="editor-content" contenteditable="true">Digite seu texto aqui...</div>
                    </div>
                    <div class="preview-box">
                        <div id="preview-content" class="preview-content" style="background: #ffffff; color: #000000; font-size: 20px;">
                            Pr√©-visualiza√ß√£o do seu texto
                        </div>
                    </div>
                    <div class="btn-group">
                        <button type="button" class="btn-success" id="save-text-btn">üíæ Salvar como M√≠dia</button>
                        <button type="button" class="btn-info" id="export-text-btn">üì• Exportar como Imagem</button>
                    </div>
                    <p id="text-editor-status" class="status-message"></p>
                </div>
            </div>

            <!-- MANAGE MEDIA TAB -->
            <div id="manage" class="tab-content">
                <div class="card">
                    <h2>üìÅ Gerenciar M√≠dias</h2>
                    <div id="media-list"></div>
                </div>
            </div>

            <!-- SCHEDULE TAB -->
            <div id="schedule" class="tab-content">
                <div class="card">
                    <h2>üìÖ Agendar M√≠dia</h2>
                    <form id="schedule-form">
                        <div class="form-group">
                            <label for="select-media">M√≠dia a Agendar:</label>
                            <select id="select-media" required>
                                <option value="">-- Selecione uma m√≠dia --</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label for="schedule-tv-target">ID da TV (ou 'Todas'):</label>
                            <input type="text" id="schedule-tv-target" placeholder="Ex: TV001 ou Todas" required>
                        </div>
                        <div class="form-group">
                            <label for="schedule-start-date">Data de In√≠cio:</label>
                            <input type="date" id="schedule-start-date" required>
                        </div>
                        <div class="form-group">
                            <label for="schedule-end-date">Data de Fim:</label>
                            <input type="date" id="schedule-end-date" required>
                        </div>
                        <div class="form-group">
                            <label for="schedule-start-time">Hora de In√≠cio:</label>
                            <input type="time" id="schedule-start-time" required>
                        </div>
                        <div class="form-group">
                            <label for="schedule-end-time">Hora de Fim:</label>
                            <input type="time" id="schedule-end-time" required>
                        </div>
                        <fieldset>
                            <legend>Dias da Semana:</legend>
                            <div class="checkbox-group">
                                <label><input type="checkbox" name="day-of-week" value="0"> Domingo</label>
                                <label><input type="checkbox" name="day-of-week" value="1"> Segunda</label>
                                <label><input type="checkbox" name="day-of-week" value="2"> Ter√ßa</label>
                                <label><input type="checkbox" name="day-of-week" value="3"> Quarta</label>
                                <label><input type="checkbox" name="day-of-week" value="4"> Quinta</label>
                                <label><input type="checkbox" name="day-of-week" value="5"> Sexta</label>
                                <label><input type="checkbox" name="day-of-week" value="6"> S√°bado</label>
                            </div>
                        </fieldset>
                        <button type="submit" class="btn-primary">üìÖ Agendar M√≠dia</button>
                        <p id="schedule-status" class="status-message"></p>
                    </form>
                </div>
            </div>

            <!-- SCHEDULES TAB -->
            <div id="schedules" class="tab-content">
                <div class="card">
                    <h2>üìã Agendamentos Ativos</h2>
                    <div id="schedules-list"></div>
                </div>
            </div>

            <!-- TVS TAB -->
            <div id="tvs" class="tab-content">
                <div class="card">
                    <h2>üì∫ TVs Online</h2>
                    <div id="tvs-list"></div>
                </div>
            </div>
        </div>
    </div>

    <!-- MODALS -->
    <div id="editModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h2>Editar M√≠dia</h2>
                <button class="close-btn">&times;</button>
            </div>
            <form id="edit-form">
                <input type="hidden" id="edit-id">
                <div class="form-group">
                    <label for="edit-name">Nome:</label>
                    <input type="text" id="edit-name" required>
                </div>
                <div class="form-group">
                    <label for="edit-duration">Dura√ß√£o (segundos):</label>
                    <input type="number" id="edit-duration" min="1" max="300">
                </div>
                <div class="btn-group">
                    <button type="submit" class="btn-primary">Salvar</button>
                    <button type="button" class="btn-secondary close-btn">Cancelar</button>
                </div>
            </form>
        </div>
    </div>

    <div id="previewModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h2>Pr√©-visualiza√ß√£o</h2>
                <button class="close-btn">&times;</button>
            </div>
            <div id="preview-media"></div>
        </div>
    </div>

    <!-- FIREBASE SDK -->
    <script src="https://www.gstatic.com/firebasejs/10.7.0/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/10.7.0/firebase-firestore-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/10.7.0/firebase-storage-compat.js"></script>

    <script>
        const firebaseConfig = {
            apiKey: "AIzaSyAffuMQ9ZgdRDEhgWKTisQSkWZvC7pJRFk",
            authDomain: "tv-zecure.firebaseapp.com",
            projectId: "tv-zecure",
            storageBucket: "tv-zecure.firebasestorage.app",
            messagingSenderId: "231299508132",
            appId: "1:231299508132:web:8f0fed0446184550dc4331",
            measurementId: "G-WBELQQMV5D"
        };

        firebase.initializeApp(firebaseConfig);
        const db = firebase.firestore();
        const storage = firebase.storage();

        // ===== DOM ELEMENTS =====
        const navItems = document.querySelectorAll('.nav-item');
        const tabContents = document.querySelectorAll('.tab-content');
        const uploadForm = document.getElementById('upload-form');
        const mediaFile = document.getElementById('media-file');
        const mediaName = document.getElementById('media-name');
        const mediaDuration = document.getElementById('media-duration');
        const uploadStatus = document.getElementById('upload-status');
        const mediaList = document.getElementById('media-list');
        const selectMedia = document.getElementById('select-media');
        const scheduleForm = document.getElementById('schedule-form');
        const scheduleStatus = document.getElementById('schedule-status');
        const schedulesList = document.getElementById('schedules-list');
        const tvsList = document.getElementById('tvs-list');
        const editModal = document.getElementById('editModal');
        const previewModal = document.getElementById('previewModal');
        const editForm = document.getElementById('edit-form');
        const editId = document.getElementById('edit-id');
        const editName = document.getElementById('edit-name');
        const editDuration = document.getElementById('edit-duration');

        // TEXT EDITOR
        const textName = document.getElementById('text-name');
        const textDuration = document.getElementById('text-duration');
        const editorContent = document.getElementById('editor-content');
        const previewContent = document.getElementById('preview-content');
        const boldBtn = document.getElementById('bold-btn');
        const italicBtn = document.getElementById('italic-btn');
        const underlineBtn = document.getElementById('underline-btn');
        const leftAlignBtn = document.getElementById('left-align-btn');
        const centerAlignBtn = document.getElementById('center-align-btn');
        const rightAlignBtn = document.getElementById('right-align-btn');
        const textColorInput = document.getElementById('text-color');
        const bgColorInput = document.getElementById('bg-color');
        const fontSizeSelect = document.getElementById('font-size');
        const saveTextBtn = document.getElementById('save-text-btn');
        const exportTextBtn = document.getElementById('export-text-btn');
        const textEditorStatus = document.getElementById('text-editor-status');

        // DASHBOARD
        const totalMediaEl = document.getElementById('total-media');
        const totalSchedulesEl = document.getElementById('total-schedules');
        const totalTvsEl = document.getElementById('total-tvs');
        const playingEl = document.getElementById('playing');

        let allMedia = [];
        let allSchedules = [];

        // ===== HELPER FUNCTIONS =====
        function showStatus(element, message, type) {
            element.textContent = message;
            element.className = `status-message ${type}`;
            element.style.display = 'block';
            setTimeout(() => element.style.display = 'none', 5000);
        }

        function getMediaType(fileName) {
            const videoExts = ['.mp4', '.webm', '.ogg', '.mov', '.avi', '.mkv', '.flv', '.m3u8'];
            const imageExts = ['.jpg', '.jpeg', '.png', '.gif', '.webp', '.bmp', '.svg'];
            const lowerFileName = fileName.toLowerCase();
            if (videoExts.some(ext => lowerFileName.includes(ext))) return 'video';
            if (imageExts.some(ext => lowerFileName.includes(ext))) return 'image';
            return 'unknown';
        }

        function openModal(modal) {
            modal.classList.add('active');
        }

        function closeModal(modal) {
            modal.classList.remove('active');
        }

        // ===== TAB NAVIGATION =====
        navItems.forEach(item => {
            item.addEventListener('click', () => {
                const tabId = item.dataset.tab;
                navItems.forEach(i => i.classList.remove('active'));
                item.classList.add('active');
                tabContents.forEach(content => content.classList.remove('active'));
                document.getElementById(tabId).classList.add('active');

                if (tabId === 'manage') renderMediaList();
                if (tabId === 'schedules') renderSchedulesList();
                if (tabId === 'tvs') renderTvsList();
                if (tabId === 'dashboard') updateDashboard();
            });
        });

        // ===== UPLOAD LOGIC =====
        uploadForm.addEventListener('submit', async (e) => {
            e.preventDefault();
            const file = mediaFile.files[0];
            const name = mediaName.value.trim();
            const duration = parseInt(mediaDuration.value);

            if (!file || !name) {
                showStatus(uploadStatus, '‚ùå Selecione um arquivo e insira um nome', 'error');
                return;
            }

            const mediaType = getMediaType(file.name);
            if (mediaType === 'unknown') {
                showStatus(uploadStatus, '‚ùå Formato n√£o suportado', 'error');
                return;
            }

            showStatus(uploadStatus, '‚è≥ Fazendo upload...', 'info');

            try {
                const storageRef = storage.ref(`media/${Date.now()}_${file.name}`);
                const snapshot = await storageRef.put(file);
                const downloadURL = await snapshot.ref.getDownloadURL();

                await db.collection('media').add({
                    name: name,
                    url: downloadURL,
                    type: mediaType,
                    duration: mediaType === 'image' ? duration : null,
                    isText: false,
                    createdAt: new Date().toISOString()
                });

                showStatus(uploadStatus, '‚úÖ M√≠dia enviada com sucesso!', 'success');
                uploadForm.reset();
                populateMediaSelect();
                renderMediaList();
                updateDashboard();
            } catch (error) {
                showStatus(uploadStatus, `‚ùå Erro: ${error.message}`, 'error');
            }
        });

        // ===== TEXT EDITOR SAVE =====
        saveTextBtn.addEventListener('click', async () => {
            const name = textName.value.trim();
            const duration = parseInt(textDuration.value);
            const content = editorContent.innerHTML;
            const textColor = textColorInput.value;
            const bgColor = bgColorInput.value;
            const fontSize = fontSizeSelect.value;

            if (!name) {
                showStatus(textEditorStatus, '‚ùå Insira um nome para o texto', 'error');
                return;
            }

            if (isNaN(duration) || duration < 1) {
                showStatus(textEditorStatus, '‚ùå Insira uma dura√ß√£o v√°lida', 'error');
                return;
            }

            showStatus(textEditorStatus, '‚è≥ Salvando texto como m√≠dia...', 'info');

            try {
                // Criar imagem do texto
                const canvas = document.createElement('canvas');
                const ctx = canvas.getContext('2d');
                canvas.width = 1920;
                canvas.height = 1080;

                ctx.fillStyle = bgColor;
                ctx.fillRect(0, 0, canvas.width, canvas.height);

                ctx.fillStyle = textColor;
                ctx.font = `bold ${fontSize} Arial`;
                ctx.textAlign = 'center';
                ctx.textBaseline = 'middle';

                const text = editorContent.innerText;
                const lines = text.split('\n');
                const lineHeight = parseInt(fontSize) + 20;
                const startY = (canvas.height - lines.length * lineHeight) / 2;

                lines.forEach((line, index) => {
                    ctx.fillText(line, canvas.width / 2, startY + index * lineHeight);
                });

                // Converter canvas para blob
                canvas.toBlob(async (blob) => {
                    try {
                        const storageRef = storage.ref(`media/text_${Date.now()}.png`);
                        const snapshot = await storageRef.put(blob);
                        const downloadURL = await snapshot.ref.getDownloadURL();

                        // Salvar no Firestore
                        await db.collection('media').add({
                            name: name,
                            url: downloadURL,
                            type: 'image',
                            duration: duration,
                            isText: true,
                            textContent: content,
                            textColor: textColor,
                            bgColor: bgColor,
                            fontSize: fontSize,
                            createdAt: new Date().toISOString()
                        });

                        showStatus(textEditorStatus, '‚úÖ Texto salvo como m√≠dia com sucesso!', 'success');
                        textName.value = '';
                        textDuration.value = '10';
                        editorContent.innerHTML = 'Digite seu texto aqui...';
                        textColorInput.value = '#000000';
                        bgColorInput.value = '#ffffff';
                        fontSizeSelect.value = '20px';
                        updatePreview();
                        populateMediaSelect();
                        renderMediaList();
                        updateDashboard();
                    } catch (error) {
                        showStatus(textEditorStatus, `‚ùå Erro ao salvar: ${error.message}`, 'error');
                    }
                });
            } catch (error) {
                showStatus(textEditorStatus, `‚ùå Erro: ${error.message}`, 'error');
            }
        });

        // ===== FETCH MEDIA =====
        async function fetchAllMedia() {
            try {
                const snapshot = await db.collection('media').get();
                allMedia = snapshot.docs.map(doc => ({ id: doc.id, ...doc.data() }));
                return allMedia;
            } catch (error) {
                console.error('Erro ao buscar m√≠dias:', error);
                return [];
            }
        }

        // ===== RENDER MEDIA LIST =====
        async function renderMediaList() {
            const media = await fetchAllMedia();
            mediaList.innerHTML = '';

            if (media.length === 0) {
                mediaList.innerHTML = '<p style="text-align: center; color: #6c757d;">Nenhuma m√≠dia cadastrada</p>';
                return;
            }

            media.forEach(item => {
                const div = document.createElement('div');
                div.className = 'list-item';
                const badge = item.isText ? '‚úèÔ∏è Texto' : (item.type === 'video' ? 'üé¨ V√≠deo' : 'üñºÔ∏è Imagem');
                div.innerHTML = `
                    <div class="list-item-content">
                        <h3>${item.name}</h3>
                        <p>Tipo: ${badge}</p>
                        <p>Dura√ß√£o: ${item.duration || 10}s</p>
                    </div>
                    <div class="list-item-actions">
                        <button class="btn-info" onclick="previewMedia('${item.id}')">üëÅÔ∏è Ver</button>
                        <button class="btn-warning" onclick="editMedia('${item.id}')">‚úèÔ∏è Editar</button>
                        <button class="btn-danger" onclick="deleteMedia('${item.id}')">üóëÔ∏è Excluir</button>
                    </div>
                `;
                mediaList.appendChild(div);
            });
        }

        // ===== EDIT MEDIA =====
        async function editMedia(id) {
            const media = allMedia.find(m => m.id === id);
            if (!media) return;

            editId.value = id;
            editName.value = media.name;
            editDuration.value = media.duration || 10;
            openModal(editModal);
        }

        editForm.addEventListener('submit', async (e) => {
            e.preventDefault();
            const id = editId.value;
            const name = editName.value.trim();
            const duration = parseInt(editDuration.value);

            try {
                await db.collection('media').doc(id).update({
                    name: name,
                    duration: duration
                });

                closeModal(editModal);
                renderMediaList();
                populateMediaSelect();
                updateDashboard();
            } catch (error) {
                alert(`Erro: ${error.message}`);
            }
        });

        // ===== DELETE MEDIA =====
        async function deleteMedia(id) {
            if (!confirm('Tem certeza que deseja excluir esta m√≠dia?')) return;

            try {
                const media = allMedia.find(m => m.id === id);
                if (media && media.url) {
                    const fileRef = storage.refFromURL(media.url);
                    await fileRef.delete();
                }

                await db.collection('media').doc(id).delete();
                renderMediaList();
                populateMediaSelect();
                updateDashboard();
            } catch (error) {
                alert(`Erro: ${error.message}`);
            }
        }

        // ===== PREVIEW MEDIA =====
        async function previewMedia(id) {
            const media = allMedia.find(m => m.id === id);
            if (!media) return;

            const previewDiv = document.getElementById('preview-media');
            previewDiv.innerHTML = '';

            if (media.type === 'video') {
                previewDiv.innerHTML = `<video controls style="width: 100%; max-height: 400px; border-radius: 8px;"><source src="${media.url}" type="video/mp4"></video>`;
            } else {
                previewDiv.innerHTML = `<img src="${media.url}" style="width: 100%; max-height: 400px; border-radius: 8px; object-fit: contain;">`;
            }

            openModal(previewModal);
        }

        // ===== POPULATE MEDIA SELECT =====
        async function populateMediaSelect() {
            const media = await fetchAllMedia();
            selectMedia.innerHTML = '<option value="">-- Selecione uma m√≠dia --</option>';
            media.forEach(item => {
                const option = document.createElement('option');
                option.value = item.id;
                const badge = item.isText ? '‚úèÔ∏è' : (item.type === 'video' ? 'üé¨' : 'üñºÔ∏è');
                option.textContent = `${badge} ${item.name}`;
                selectMedia.appendChild(option);
            });
        }

        // ===== SCHEDULE LOGIC =====
        scheduleForm.addEventListener('submit', async (e) => {
            e.preventDefault();
            const mediaId = selectMedia.value;
            const tvTarget = document.getElementById('schedule-tv-target').value.trim();
            const startDate = document.getElementById('schedule-start-date').value;
            const endDate = document.getElementById('schedule-end-date').value;
            const startTime = document.getElementById('schedule-start-time').value;
            const endTime = document.getElementById('schedule-end-time').value;
            const days = Array.from(document.querySelectorAll('#schedule-form input[name="day-of-week"]:checked')).map(cb => parseInt(cb.value));

            if (!mediaId || !tvTarget || !startDate || !endDate || !startTime || !endTime || days.length === 0) {
                showStatus(scheduleStatus, '‚ùå Preencha todos os campos', 'error');
                return;
            }

            showStatus(scheduleStatus, '‚è≥ Agendando...', 'info');

            try {
                const media = allMedia.find(m => m.id === mediaId);
                await db.collection('schedules').add({
                    mediaId: media.id,
                    mediaName: media.name,
                    mediaUrl: media.url,
                    mediaType: media.type,
                    mediaDuration: media.duration,
                    tvId: tvTarget,
                    startDate: startDate,
                    endDate: endDate,
                    startTime: startTime,
                    endTime: endTime,
                    daysOfWeek: days,
                    createdAt: new Date().toISOString()
                });

                showStatus(scheduleStatus, '‚úÖ M√≠dia agendada com sucesso!', 'success');
                scheduleForm.reset();
                renderSchedulesList();
                updateDashboard();
            } catch (error) {
                showStatus(scheduleStatus, `‚ùå Erro: ${error.message}`, 'error');
            }
        });

        // ===== FETCH SCHEDULES =====
        async function fetchAllSchedules() {
            try {
                const snapshot = await db.collection('schedules').get();
                allSchedules = snapshot.docs.map(doc => ({ id: doc.id, ...doc.data() }));
                return allSchedules;
            } catch (error) {
                console.error('Erro ao buscar agendamentos:', error);
                return [];
            }
        }

        // ===== RENDER SCHEDULES =====
        async function renderSchedulesList() {
            const schedules = await fetchAllSchedules();
            schedulesList.innerHTML = '';

            if (schedules.length === 0) {
                schedulesList.innerHTML = '<p style="text-align: center; color: #6c757d;">Nenhum agendamento ativo</p>';
                return;
            }

            schedules.forEach(item => {
                const div = document.createElement('div');
                div.className = 'list-item';
                div.innerHTML = `
                    <div class="list-item-content">
                        <h3>${item.mediaName}</h3>
                        <p>TV: ${item.tvId}</p>
                        <p>Per√≠odo: ${item.startDate} a ${item.endDate}</p>
                        <p>Hor√°rio: ${item.startTime} - ${item.endTime}</p>
                    </div>
                    <div class="list-item-actions">
                        <button class="btn-danger" onclick="deleteSchedule('${item.id}')">üóëÔ∏è Excluir</button>
                    </div>
                `;
                schedulesList.appendChild(div);
            });
        }

        // ===== DELETE SCHEDULE =====
        async function deleteSchedule(id) {
            if (!confirm('Tem certeza que deseja excluir este agendamento?')) return;

            try {
                await db.collection('schedules').doc(id).delete();
                renderSchedulesList();
                updateDashboard();
            } catch (error) {
                alert(`Erro: ${error.message}`);
            }
        }

        // ===== RENDER TVS =====
        async function renderTvsList() {
            try {
                const snapshot = await db.collection('tvs').get();
                tvsList.innerHTML = '';

                if (snapshot.empty) {
                    tvsList.innerHTML = '<p style="text-align: center; color: #6c757d;">Nenhuma TV online</p>';
                    return;
                }

                snapshot.forEach(doc => {
                    const tv = doc.data();
                    const div = document.createElement('div');
                    div.className = 'list-item';
                    const lastSeen = new Date(tv.lastSeen).toLocaleString('pt-BR');
                    div.innerHTML = `
                        <div class="list-item-content">
                            <h3>${tv.tvId}</h3>
                            <p>Status: ${tv.isOnline ? 'üü¢ Online' : 'üî¥ Offline'}</p>
                            <p>√öltimo acesso: ${lastSeen}</p>
                            <p>M√≠dia: ${tv.currentMedia || 'Nenhuma'}</p>
                        </div>
                    `;
                    tvsList.appendChild(div);
                });
            } catch (error) {
                console.error('Erro ao buscar TVs:', error);
            }
        }

        // ===== UPDATE DASHBOARD =====
        async function updateDashboard() {
            const media = await fetchAllMedia();
            const schedules = await fetchAllSchedules();
            const tvSnapshot = await db.collection('tvs').get();
            const tvs = tvSnapshot.docs.map(doc => doc.data());

            totalMediaEl.textContent = media.length;
            totalSchedulesEl.textContent = schedules.length;
            totalTvsEl.textContent = tvs.filter(tv => tv.isOnline).length;
            playingEl.textContent = tvs.filter(tv => tv.isOnline && tv.currentMedia).length;
        }

        // ===== TEXT EDITOR =====
        boldBtn.addEventListener('click', () => document.execCommand('bold'));
        italicBtn.addEventListener('click', () => document.execCommand('italic'));
        underlineBtn.addEventListener('click', () => document.execCommand('underline'));
        leftAlignBtn.addEventListener('click', () => document.execCommand('justifyLeft'));
        centerAlignBtn.addEventListener('click', () => document.execCommand('justifyCenter'));
        rightAlignBtn.addEventListener('click', () => document.execCommand('justifyRight'));

        textColorInput.addEventListener('change', () => {
            document.execCommand('foreColor', false, textColorInput.value);
            updatePreview();
        });

        bgColorInput.addEventListener('change', () => {
            document.execCommand('backColor', false, bgColorInput.value);
            updatePreview();
        });

        fontSizeSelect.addEventListener('change', () => {
            editorContent.style.fontSize = fontSizeSelect.value;
            updatePreview();
        });

        editorContent.addEventListener('input', updatePreview);

        function updatePreview() {
            previewContent.innerHTML = editorContent.innerHTML;
            previewContent.style.color = textColorInput.value;
            previewContent.style.backgroundColor = bgColorInput.value;
            previewContent.style.fontSize = fontSizeSelect.value;
        }

        exportTextBtn.addEventListener('click', () => {
            const canvas = document.createElement('canvas');
            const ctx = canvas.getContext('2d');
            canvas.width = 1920;
            canvas.height = 1080;

            ctx.fillStyle = bgColorInput.value;
            ctx.fillRect(0, 0, canvas.width, canvas.height);

            ctx.fillStyle = textColorInput.value;
            ctx.font = `bold ${fontSizeSelect.value} Arial`;
            ctx.textAlign = 'center';
            ctx.textBaseline = 'middle';

            const text = editorContent.innerText;
            const lines = text.split('\n');
            const lineHeight = parseInt(fontSizeSelect.value) + 20;
            const startY = (canvas.height - lines.length * lineHeight) / 2;

            lines.forEach((line, index) => {
                ctx.fillText(line, canvas.width / 2, startY + index * lineHeight);
            });

            const link = document.createElement('a');
            link.href = canvas.toDataURL('image/png');
            link.download = `texto_${Date.now()}.png`;
            link.click();

            showStatus(textEditorStatus, '‚úÖ Imagem exportada com sucesso!', 'success');
        });

        // ===== MODAL CLOSE =====
        document.querySelectorAll('.close-btn').forEach(btn => {
            btn.addEventListener('click', (e) => {
                e.target.closest('.modal').classList.remove('active');
            });
        });

        window.addEventListener('click', (e) => {
            if (e.target.classList.contains('modal')) {
                e.target.classList.remove('active');
            }
        });

        // ===== INITIALIZATION =====
        document.addEventListener('DOMContentLoaded', () => {
            const today = new Date().toISOString().split('T')[0];
            document.getElementById('schedule-start-date').min = today;
            document.getElementById('schedule-end-date').min = today;

            fetchAllMedia();
            populateMediaSelect();
            renderMediaList();
            renderSchedulesList();
            renderTvsList();
            updateDashboard();

            setInterval(() => {
                renderTvsList();
                updateDashboard();
            }, 10000);
        });
    </script>
</body>
</html>